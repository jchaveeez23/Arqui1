# -*- coding: utf-8 -*-
import time
import board
import adafruit_dht

# Inicializar el sensor en GPIO4 (pin f√≠sico 7)
dht_device = adafruit_dht.DHT11(board.D4)

try:
    while True:
        try:
            temperature_c = dht_device.temperature
            humidity = dht_device.humidity

            if temperature_c is not None and humidity is not None:
                print("Temperatura: {:.1f} C".format(temperature_c))
                print("Humedad: {:.1f} %".format(humidity))
            else:
                print("Error: No se pudo leer el sensor. Reintentando...")

        except RuntimeError as error:
            # Errores tipicos de lectura en DHT11, se ignoran y reintenta
            print("Error de lectura:", error.args[0])

        time.sleep(5)

except KeyboardInterrupt:
    print("\nPrograma detenido por el usuario.")
    dht_device.exit()
    print("GPIO liberados correctamente (interrupcion por teclado).")

finally:
    dht_device.exit()
    print("GPIO liberados correctamente (salida del programa).")
