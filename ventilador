import time
import board
import adafruit_dht
import RPi.GPIO as GPIO

# Pin del LED
LED_PIN = 40
GPIO.setmode(GPIO.BCM)
GPIO.setup(LED_PIN, GPIO.OUT)
GPIO.output(LED_PIN, GPIO.LOW)

# DHT11 en GPIO4
dht_device = adafruit_dht.DHT11(board.D4)

TEMP_UMBRAL = 25  # Â°C para encender LED

try:
    while True:
        try:
            temp = dht_device.temperature
            hum = dht_device.humidity

            if temp is not None and hum is not None:
                print(f"Temp: {temp:.1f} Â°C  Humedad: {hum:.1f} %")

                if temp >= TEMP_UMBRAL:
                    GPIO.output(LED_PIN, GPIO.HIGH)  # LED encendido
                    print("LED ENCENDIDO ðŸ”´")
                else:
                    GPIO.output(LED_PIN, GPIO.LOW)   # LED apagado
                    print("LED APAGADO âš«")
            else:
                print("Error: no se pudo leer el sensor.")

        except RuntimeError as error:
            print("Error de lectura:", error.args[0])

        time.sleep(5)

except KeyboardInterrupt:
    print("Programa detenido por usuario")
finally:
    GPIO.cleanup()
